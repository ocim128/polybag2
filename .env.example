# Required: Polymarket private key (single-mode default)
# How to get it: log in at https://reveal.magic.link/polymarket and export your key
POLYMARKET_PRIVATE_KEY=

# Proxy wallet address (required for Email/Magic login flow)
# Use the address shown in Builder Settings
POLYMARKET_PROXY_ADDRESS=

# === Multi-Wallet Mode (optional) ===
# Define up to 3 wallets. When any WALLET_N_KEY is set, the bot shows
# an interactive launcher to pick strategies and assign wallets.
# Each strategy runs independently on its own wallet (max 3 slots).
# WALLET_1_NAME=MainAccount
# WALLET_1_KEY=<private-key-hex>
# WALLET_1_PROXY=<proxy-address>
# WALLET_1_STRATEGY=arb
# WALLET_2_NAME=TestMM
# WALLET_2_KEY=<private-key-hex>
# WALLET_2_PROXY=<proxy-address>
# WALLET_2_STRATEGY=mm
# WALLET_3_NAME=TestArb
# WALLET_3_KEY=<private-key-hex>
# WALLET_3_PROXY=<proxy-address>
# WALLET_3_STRATEGY=arb
#
# Multi-wallet unattended mode:
# false = interactive picker (default)
# true  = skip picker, auto-start all configured wallets using WALLET_N_STRATEGY
MULTI_WALLET_NON_INTERACTIVE=false

# Merge requires Builder keys (from Builder Settings)
POLY_BUILDER_API_KEY=
POLY_BUILDER_SECRET=
POLY_BUILDER_PASSPHRASE=


# Market discovery config (optional, defaults available): bitcoin,ethereum,solana,xrp
CRYPTO_SYMBOLS=btc      # Symbols to monitor
MARKET_REFRESH_ADVANCE_SECS=5       # Query lead time in seconds

# === Strategy Mode ===
# arb = spread arbitrage (original, default)
# mm  = adversarial market maker (Phase 2)
# hybrid = NOT YET IMPLEMENTED, falls back to arb (use multi-wallet mode instead)
TRADING_MODE=arb

# Startup Wizard: if true, show interactive strategy picker on startup (single-wallet mode)
STARTUP_WIZARD=false

# Dry-run: log all decisions but never send orders (safe for testing)
DRY_RUN=false

# Live trading confirmation:
# true = require typing LIVE when DRY_RUN=false
# false = skip interactive confirmation (useful for systemd/automation)
LIVE_CONFIRM_REQUIRED=true

# === Market Maker Settings (only used when TRADING_MODE=mm) ===
MM_BASE_SPREAD=0.03               # Half-spread per side (3¢ → 6¢ total spread)
MM_INVENTORY_GAMMA=0.03           # Inventory risk aversion (higher = rebalance faster)
MM_MAX_POSITION_PER_SIDE=5        # Max shares per side (safe for $12: ~$2.50 exposure)
MM_QUOTE_SIZE=1                   # Shares per quote (1 share ≈ $0.50)
MM_MIN_SECONDS_TO_QUOTE=30        # Stop quoting N seconds before window end

# === Apex Market Maker Settings (only used when TRADING_MODE=apex) ===
APEX_BASE_SPREAD=0.03                  # Half-spread per side
APEX_INVENTORY_GAMMA=0.05              # Avellaneda-Stoikov risk aversion
APEX_MAX_POSITION_PER_SIDE=10          # Max shares per side
APEX_QUOTE_SIZE=1                      # Shares per quote
APEX_MIN_SECONDS_TO_QUOTE=10           # Stop quoting 10s before expiry
APEX_TOXICITY_QUOTE_THRESHOLD=5        # Quotes per 10s considered toxic
APEX_TOXICITY_IMBALANCE_THRESHOLD=0.3  # OB imbalance shift (0.3 = 30%)

# Trading config (optional, defaults available)
MIN_PROFIT_THRESHOLD=0.001          # Minimum profit threshold (0.1%)
MAX_ORDER_SIZE_USDC=5.0           # Maximum single order size (USDC)

# Arbitrage execution spread: execute when yes+no <= 1 - spread
ARBITRAGE_EXECUTION_SPREAD=0.02

MIN_YES_PRICE_THRESHOLD=0.0 # Example: execute only if YES price >= 0.5
MIN_NO_PRICE_THRESHOLD=0.0  # Example: execute only if NO price >= 0.35

# Slippage [first, second]: second for down side only, first for up and flat, e.g. "-0.02,0.0"
SLIPPAGE=0.0,0.0


# Arbitrage order type: GTC | GTD | FOK | FAK (default GTD)
ARBITRAGE_ORDER_TYPE=GTC
# GTD expiration in seconds, default is 300 seconds (5 minutes)
GTD_EXPIRATION_SECS=3600

# Risk management config (optional, defaults available)
RISK_MAX_EXPOSURE_USDC=50       # Maximum exposure per cycle (USDC)
RISK_IMBALANCE_THRESHOLD=0.1        # Position imbalance threshold (10%)
HEDGE_TAKE_PROFIT_PCT=0.2  # 20% take-profit
HEDGE_STOP_LOSS_PCT=0.5    # 20% stop-loss
RUST_LOG=info


# Stop arbitrage N minutes before market end, default 0 (disabled)
STOP_ARBITRAGE_BEFORE_END_MINUTES=3

# Wind down before window end: trigger wind down (cancel orders -> merge -> sell remaining)
# when this many minutes remain in the current 5-minute window. 0 = disabled.
WIND_DOWN_BEFORE_WINDOW_END_MINUTES=1
# Limit price for single-leg sell during wind down, default 0.01
WIND_DOWN_SELL_PRICE=0.01

# Scheduled merge interval in minutes. 0 = disabled.
# CONDITION_ID is sourced from the current window order book markets.
MERGE_INTERVAL_MINUTES=1


# Position sync config
# Position sync interval (seconds)
POSITION_SYNC_INTERVAL_SECS=0
# Position balance check interval (seconds)
POSITION_BALANCE_INTERVAL_SECS=0
# Imbalance threshold
POSITION_BALANCE_THRESHOLD=99999.0
# Minimum total position requirement
POSITION_BALANCE_MIN_TOTAL=5.0

# --- Security hardening for merge endpoints ---
# Optional relayer override. Default: https://relayer-v2.polymarket.com
RELAYER_URL=https://relayer-v2.polymarket.com
# Security override (NOT recommended): allow non-allowlisted RPC/relayer endpoints.
# Default secure behavior is strict allowlist and https-only.
MERGE_ALLOW_UNSAFE_ENDPOINTS=0
